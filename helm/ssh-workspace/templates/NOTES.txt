ğŸš€ SSH Workspace has been deployed successfully!

ğŸ“‹ Deployment Information:
   Release Name: {{ .Release.Name }}
   Namespace:    {{ .Release.Namespace }}
   Username:     {{ .Values.user.name }}
   {{- if .Values.user.uid }}
   User ID:      {{ .Values.user.uid }}
   {{- end }}
   {{- if .Values.user.sudo }}
   Sudo Access:  âœ“ Enabled
   {{- else }}
   Sudo Access:  âœ— Disabled
   {{- end }}

ğŸ”Œ Connection Information:
{{- if eq .Values.service.type "ClusterIP" }}
   Service Type: ClusterIP (internal access only)
   
   To access your SSH workspace from within the cluster:
   ssh {{ .Values.user.name }}@{{ include "ssh-workspace.fullname" . }}.{{ .Release.Namespace }}.svc.cluster.local -p {{ .Values.service.port }}
   
   To access from outside the cluster, use port-forwarding:
   kubectl port-forward -n {{ .Release.Namespace }} svc/{{ include "ssh-workspace.fullname" . }} {{ .Values.service.port }}:{{ .Values.service.port }}
   ssh {{ .Values.user.name }}@localhost -p {{ .Values.service.port }}

{{- else if eq .Values.service.type "NodePort" }}
   Service Type: NodePort
   
   Get the NodePort:
   export NODE_PORT=$(kubectl get --namespace {{ .Release.Namespace }} -o jsonpath="{.spec.ports[0].nodePort}" services {{ include "ssh-workspace.fullname" . }})
   export NODE_IP=$(kubectl get nodes --namespace {{ .Release.Namespace }} -o jsonpath="{.items[0].status.addresses[0].address}")
   
   Connect using:
   ssh {{ .Values.user.name }}@$NODE_IP -p $NODE_PORT

{{- else if eq .Values.service.type "LoadBalancer" }}
   Service Type: LoadBalancer
   
   Get the LoadBalancer IP (may take a few minutes):
   kubectl get svc --namespace {{ .Release.Namespace }} {{ include "ssh-workspace.fullname" . }} -w
   
   Once available, connect using:
   ssh {{ .Values.user.name }}@<EXTERNAL-IP> -p {{ .Values.service.port }}
{{- end }}

ğŸ’¾ Storage Information:
{{- if .Values.persistence.enabled }}
   âœ“ Persistent storage is ENABLED
   ğŸ“ Home directory: /home/{{ .Values.user.name }}
   ğŸ’½ Storage size: {{ .Values.persistence.size }}
   ğŸ”’ Data will persist across pod restarts
{{- else }}
   âš ï¸  Persistent storage is DISABLED
   ğŸ“ Home directory: /home/{{ .Values.user.name }} (temporary)
   ğŸ—‘ï¸  Data will be LOST when pod restarts
{{- end }}

ğŸ” Security Level: {{ .Values.security.level | title }}
{{- if eq .Values.security.level "basic" }}
   âš ï¸  Basic security level - suitable for development only
{{- else if eq .Values.security.level "standard" }}
   âœ“ Standard security level - recommended for most use cases
{{- else if eq .Values.security.level "high" }}
   ğŸ”’ High security level - suitable for production environments
{{- end }}

{{- if .Values.monitoring.enabled }}

ğŸ“Š Monitoring:
   âœ“ SSH metrics collection is ENABLED
   ğŸ“ˆ Metrics port: {{ .Values.monitoring.port }}
   {{- if .Values.monitoring.serviceMonitor.enabled }}
   ğŸ“Š Prometheus ServiceMonitor is enabled
   {{- end }}
{{- end }}

{{- if .Values.ingress.enabled }}

ğŸŒ Ingress:
   âœ“ Ingress is ENABLED
   {{- range .Values.ingress.hosts }}
   ğŸ”— Host: {{ .host }}
   {{- end }}
{{- end }}

ğŸ”§ Management Commands:
   Check status:           kubectl get all -n {{ .Release.Namespace }} -l app.kubernetes.io/instance={{ .Release.Name }}
   View logs:              kubectl logs -n {{ .Release.Namespace }} -l app.kubernetes.io/instance={{ .Release.Name }} -f
   Run tests:              helm test {{ .Release.Name }} -n {{ .Release.Namespace }}
   {{- if .Values.persistence.enabled }}
   Check storage:          kubectl get pvc -n {{ .Release.Namespace }} -l app.kubernetes.io/instance={{ .Release.Name }}
   {{- end }}

ğŸš¨ Important Notes:
{{- if not .Values.persistence.enabled }}
   âš ï¸  WITHOUT persistent storage, all data will be lost when the pod restarts!
   ğŸ’¡ To enable persistence, set: --set persistence.enabled=true
{{- end }}

   ğŸ”’ Only key-based SSH authentication is allowed
   ğŸš« Password authentication is disabled for security
   ğŸ“§ Contact your administrator if you encounter connection issues

ğŸ†˜ Troubleshooting:
   Connection refused:     Check if the pod is running and ready
   Permission denied:      Verify your SSH private key matches the configured public key
   Timeout:               Check network connectivity and firewall rules
   Pod not starting:      Check the logs for initialization errors

   For detailed troubleshooting, visit: https://github.com/example/ssh-workspace/docs/troubleshooting

Happy coding! ğŸ‰