# SSH Workspace Configuration
Port 22
ListenAddress 0.0.0.0
Protocol 2

# ホストキー設定
HostKey /etc/ssh/ssh_host_rsa_key
HostKey /etc/ssh/ssh_host_ecdsa_key
HostKey /etc/ssh/ssh_host_ed25519_key

# 認証設定
PasswordAuthentication no
PubkeyAuthentication yes
AuthorizedKeysFile .ssh/authorized_keys
PermitRootLogin no
MaxAuthTries 3
LoginGraceTime 30

# セッション設定
ClientAliveInterval 300
ClientAliveCountMax 3
TCPKeepAlive yes

# X11転送
X11Forwarding yes
X11DisplayOffset 10
X11UseLocalhost yes

# ポート転送
AllowTcpForwarding yes
GatewayPorts no

# ログ設定
SyslogFacility AUTH
LogLevel INFO

# その他セキュリティ設定
StrictModes yes
IgnoreRhosts yes
HostbasedAuthentication no
PermitEmptyPasswords no
ChallengeResponseAuthentication no
UsePAM yes
PrintMotd no
PrintLastLog yes
UseDNS no

# 権限分離は自動的に有効（現代のOpenSSH）