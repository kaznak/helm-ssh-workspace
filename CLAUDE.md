
# ファイルの編集について

以下のファイルはプロジェクトの方向性を決定する重要なファイルであるから、
ユーザの許可なく編集しないこと。

- CLAUDE.md
- README.md
- docs/requirements.md
- docs/design.md

以下のディレクトリはユーザの参考用のファイルを格納しているので、あなたの読み込み・編集対象から外してください。

- tmp/

# ファイルの依存関係について

以下のファイル間には暗黙の依存関係があるため注意すること。

- README.md is depended on by
  - docs/design.md

# 文書内の重要項目IDについて

- 文書内には要求、要件等の他の箇所から特に参照されるべき重要事項が存在する。
- 重要事項には各項目にIDを付与してリンクで参照できるようにすること
- ID の命名は以下のルールに従うこと
  - 4文字のランダムな英数字（大文字） + ハイフン + 意味のある短縮名（例：`K7M9-AUTH`）
  - 順序依存を避けるため、連番は使用しない
  - 意味的な短縮名により内容を把握しやすくする
- ドキュメントやコード中の重要項目の定義と参照時の記法
  - 各 ID は文書中で読者が視認できるようにすること
  - 可能な限りリンク形式で参照すること
  - 定義時の記法は以下の通り
    - 参照記法がある場合、マークダウンの例: `<span id="K7M9-AUTH">[K7M9-AUTH]</span>`
    - 参照記法が無い場合: `[K7M9-AUTH]`
      - 多くの場合ドキュメントはマークダウンで記述されるため、この形式で定義されることは基本的にはない
　- 参照時の記法は以下の通り
    - 参照記法がある場合、マークダウンの例: `[see:K7M9-AUTH](./file.md#K7M9-AUTH)`
    - 参照記法が無い場合: `[see:K7M9-AUTH]`
      - ソースコードなどはこちらの形式でコメントに記載すること

# 開発の進め方について

- t-wada の推奨する TDD のアプローチに基づいて進めること。
- 要求・要件は FURPS+ モデルに基づいて分類し、各カテゴリに分けて記載すること。
  - 各項目は一文で独立して理解できるように記載し、重要項目IDを付与すること。
- こまめにコミットしながら進めること。
- 適宜コード中の重要事項IDの参照と要求・要件・設計事項の間の対応を確認し、十分な実装が行われているかを確認すること。
- シェルスクリプトは docs/bash-scripting-guidelines.ja.md に従って記述すること。
- Makefile の .PHONY ターゲットには必ず sentry file パターンを使用すること。
- ビルド、テスト、デプロイ等のタスクは必ず Makefile に定義し、依存関係を sentry file パターンで明示すること。
- 開発の流れは docs/development.md を参照すること

# 削除すべきコード

1. 機能しないコード
- プレースホルダー実装
- 何もしないwrapper関数
- hardcodedテスト値

2. 失敗を隠蔽するコード
- 「ツールがない場合はスキップ」
- エラーを無視する条件分岐
- 曖昧な成功判定

3. 冗長なコード
- 重複するドキュメント
- 明らかな内容の説明
- 単純なwrapper

4. テストされていないコード
- 実行パスが不明
- 結果が予測できない
- 使用されていない機能

判断の指針

削除検討の質問:
- 無くても機能は維持されるか？
- 実際にテストされているか？
- 保守コストに見合う価値があるか？

基本原則:
- Fail Fast: エラーは隠蔽せず明確に失敗
- YAGNI: 実際に必要な機能のみ実装
- DRY: 重複を避ける

結果: 機能を維持しながら保守性を向上
